# Application Configuration
NODE_ENV=development
PORT=3000

# Base64-encoded 32-byte key for AES-256-GCM encryption
ENCRYPTION_KEY=your_base64_encoded_32_byte_key

# Database Configuration
DB_TYPE=postgres
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=your_password
DB_NAME=beneficiary_backend

# Keycloak Configuration
# Keycloak server URL
KEYCLOAK_URL=http://localhost:8080
# Admin CLI client secret
KEYCLOAK_ADMIN_CLI_CLIENT_SECRET=your_admin_cli_secret
# Application realm name
KEYCLOAK_REALM_NAME_APP=your_realm_name
# Application client name
KEYCLOAK_CLIENT_NAME_APP=your_client_name
# Keycloak admin username
KEYCLOAK_ADMIN_USERNAME=admin
# Keycloak client ID
KEYCLOAK_CLIENT_ID=your_client_id
# Keycloak default group assigned to user while registration
KEYCLOAK_DEFAULT_GROUP_PATH="/beneficiary"

# Hasura Configuration
HASURA_URL=http://localhost:8080/v1/graphql
HASURA_GRAPHQL_ADMIN_SECRET=your_hasura_admin_secret

# DB details
CACHE_DB=your_cache_table_name
RESPONSE_CACHE_DB=your_response_cache_table_name
SEEKER_DB=your_seeker_table_name
ORDER_DB=your_order_table_name
TELEMETRY_DB=your_telemetry_table_name

# Onest Protocol Configuration
# Beckn domain
DOMAIN=your_domain
# Beckn Application Platform ID
BAP_ID=your_bap_id
# Beckn Application Platform URI
BAP_URI=https://your_bap_uri
# Beckn Provider Platform ID
BPP_ID=your_bpp_id
# Beckn Provider Platform URI
BPP_URI=https://your_bpp_uri
# BAP client URL
BAP_CLIENT_URL=https://your_bap_client_url
# network cache refresh cadence (every 15 minutes)
NETWORK_CACHE_REFRESH_CRON_TIME="*/15 * * * *"
# OTP Configuration
OTP_AUTH_KEY=your_otp_auth_key
OTP_CUSTOMER_ID=your_otp_customer_id
OTP_ENTITY_ID=your_otp_entity_id
OTP_MESSAGE_TYPE=your_otp_message_type
OTP_SOURCE_ATTR=your_otp_source_attr
OTP_TEMPLATE_ID=your_otp_template_id

# SMS Configuration
SMS_API_URL=https://your_sms_api_url

# Digital Wallet Configuration
WALLET_API_URL=https://your_wallet_api_url
WALLET_BASE_URL=https://your_wallet_api_url


# VC verification service URL
VC_VERIFICATION_SERVICE_URL=https://your-vc-service.com/verify
# Default VC issuer name
VC_DEFAULT_ISSUER_NAME=dhiway

# Eligibility checking service URL
ELIGIBILITY_API_URL=https://your-eligibility-service.com

# Default Signup Password
SIGNUP_DEFAULT_PASSWORD=Digivrtti@123

# Dhiway Watcher
BASE_URL=https://base_url
DHIWAY_WATCHER_EMAIL=example@gmail.com
DHIWAY_WATCHER_URL=https://wacher_url

# Sentry Config
SENTRY_DSN=https://example_sentry_dsn
SENTRY_ENVIRONMENT=dev

# Prefix for file names in storage: used to differentiate between 'dev', and 'prod'
FILE_PREFIX_ENV=dev

# Storage provider for file uploads: 's3' for AWS S3 storage
FILE_STORAGE_PROVIDER=s3

# S3 Configuration
AWS_S3_REGION=
AWS_S3_ACCESS_KEY_ID=
AWS_S3_SECRET_ACCESS_KEY=
AWS_S3_BUCKET_NAME=
AWS_S3_PREFIX=

# OCR Provider Configuration
# Options: 'aws-textract', 'google-gemini', or 'tesseract'(works offline)
# Defaults to 'aws-textract' if not set
OCR_PROVIDER=aws-textract

# AWS Textract Configuration for OCR (required if OCR_PROVIDER=aws-textract)
AWS_TEXTRACT_AWS_REGION=
AWS_TEXTRACT_ACCESS_KEY_ID=
AWS_TEXTRACT_SECRET_ACCESS_KEY=

# Google Gemini API Configuration for OCR (required if OCR_PROVIDER=google-gemini)
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_OCR_MODEL=gemini-2.0-flash-exp

# Custom OCR Extraction Prompt (optional - default is optimized)
OCR_EXTRACTION_PROMPT=Extract all text from this document. Return only the extracted text, preserving the original layout and formatting as much as possible. Do not add any explanations, comments, or additional formatting.


# OCR Mapping Configuration
# Used for interpreting extracted OCR text
# and mapping it into structured data.
# Options: 'bedrock' or 'google-gemini'
OCR_MAPPING_PROVIDER=bedrock

### AWS Bedrock Configuration (used when OCR_MAPPING_PROVIDER=bedrock) ###
OCR_MAPPING_BEDROCK_ACCESS_KEY_ID=your-bedrock-access-key-id
OCR_MAPPING_BEDROCK_SECRET_ACCESS_KEY=your-bedrock-secret-access-key
OCR_MAPPING_BEDROCK_REGION=ap-south-1

# Bedrock model selection - supports 3 models with auto-configuration:
# - anthropic.claude-sonnet-4-20250514-v1:0  (Best accuracy, 4096 tokens)
# - openai.gpt-oss-safeguard-120b            (Balanced, 4096 tokens)
# - meta.llama3-8b-instruct-v1:0             (Fastest/cheapest, 2048 tokens)
OCR_MAPPING_BEDROCK_MODEL_ID=openai.gpt-oss-safeguard-120b

### Google Gemini Configuration (used when OCR_MAPPING_PROVIDER=google-gemini) ###
OCR_MAPPING_GEMINI_API_KEY=your-gemini-api-key
OCR_MAPPING_GEMINI_MODEL_NAME=gemini-2.0-flash-exp

# Custom OCR Mapping Prompt Template (optional - default is optimized for strict validation)
# This prompt FIRST validates document type, THEN extracts data (validation errors prevent "missing fields" errors)
# Available placeholders: {expectedDocumentName}, {extractedText}, {schema}
OCR_MAPPING_PROMPT_TEMPLATE=CRITICAL: COMPLETE DOCUMENT VALIDATION FIRST BEFORE DATA EXTRACTION. PHASE 1: DOCUMENT TYPE VALIDATION (MANDATORY): Your PRIMARY TASK is determining if uploaded document is "{expectedDocumentName}". Many documents are uploaded incorrectly. CATCH MISMATCHES BEFORE EXTRACTION. DOCUMENT TEXT: {extractedText} EXPECTED TYPE: "{expectedDocumentName}" VALIDATION PROCESS: STEP 1: READ DOCUMENT TITLE/HEADING - What does document call itself? Main title at top is STRONGEST indicator. STEP 2: IDENTIFY CATEGORY - What is purpose? Academic/government certificate/identity/other? STEP 3: EXAMINE SCHEMA: {schema} - What data type does schema expect? Do fields make sense for this document? STEP 4: COMPARE CONTENT VS SCHEMA - Does document contain field types schema expects? Is structure compatible? STEP 5: DECIDE: Set "isValidDocument":true ONLY IF ALL TRUE: Title matches "{expectedDocumentName}", Category aligns, Contains characteristic schema fields, Structure appropriate, HIGH CONFIDENCE. Set "isValidDocument":false IF ANY TRUE: Title indicates DIFFERENT type, Category doesn't match, Missing most key schema fields, Structure doesn't fit, ANY doubt/uncertainty, Unrelated content. CRITICAL: Don't extract if type doesn't match, Don't set true just because SOME fields extractable, Don't ignore title/type mismatches, Don't assume partial matches mean valid, Be extremely strict, Trust document's own title, Set false when uncertain. PHASE 2: EXTRACTION (ONLY IF isValidDocument=true): IF isValidDocument=false: Return immediately {"isValidDocument":false, ...all null}. DO NOT extract. IF isValidDocument=true: Extract per rules: 1. Use ONLY verbatim text 2. Not found = null 3. Never guess/infer 4. Never cross-use fields 5. Names: individual only, exclude S/O/D/O/W/O 6. Dates: only if explicitly labeled 7. Addresses: complete but separate per schema 8. Numbers: strip leading hyphens 9-10. REJECT: standalone punctuation, only punctuation/whitespace 11. Number fields: only hyphen = null. OUTPUT: Pure JSON only. {"isValidDocument":true/false, "field1":value/null, ...}. If false, ALL fields null. No markdown/explanations.


# Dhiway VC API Configuration
VITE_VC_BASE_URL=https://api.depwd.onest.dhiway.net/api/v1
VITE_VC_ORGANIZATION_ID=
VITE_VC_AUTH_TOKEN=
VITE_VC_USER_ID=

# Set to true to allow wallet registration, false to disable it
WALLET_REGISTRATION_ENABLED=false

# File upload max size in MB (e.g., 5, 10, 20)
FILE_UPLOAD_MAX_SIZE_MB=5

# Profile Picture max size in MB (e.g., 5, 10, 20)
PROFILE_PICTURE_MAX_SIZE_MB=10

# User Profile picture S3 bucket prefix
AWS_S3_PROFILE_PICTURE_PREFIX=user-profile-pictures

# Dhiway Analytics API base URL
DHIWAY_ANALYTICS_BASE_URL=

# Dhiway Analytics API timeout in milliseconds
DHIWAY_ANALYTICS_TIMEOUT_MS=30000

# VC processing lookback window in minutes - events within this window from current time are not processed
VC_PROCESSING_LOOKBACK_MINUTES=30

# VC processing cron schedule (cron expression: minute hour day month day-of-week)
# VC_PROCESSING_CRON_SCHEDULE=*/5 * * * *
VC_PROCESSING_CRON_SCHEDULE=0 */2 * * *  # Uncomment for 2-hour cron timing

